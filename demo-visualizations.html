<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Visualizations Demo - DataFlow Analytics</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/app.css">
    <link rel="stylesheet" href="assets/css/mock-charts.css">

    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>

    <style>
        body {
            padding: var(--space-6);
            background: var(--bg-tertiary);
        }

        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .demo-header {
            text-align: center;
            margin-bottom: var(--space-8);
            padding: var(--space-6);
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-md);
        }

        .demo-title {
            font-size: var(--font-size-3xl);
            font-weight: var(--font-weight-bold);
            color: var(--text-primary);
            margin: 0 0 var(--space-2) 0;
        }

        .demo-subtitle {
            font-size: var(--font-size-lg);
            color: var(--text-secondary);
            margin: 0;
        }

        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: var(--space-6);
            margin-bottom: var(--space-8);
        }

        .demo-section {
            background: var(--bg-primary);
            padding: var(--space-6);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-sm);
        }

        .demo-section-title {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            margin: 0 0 var(--space-4) 0;
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .data-display {
            background: var(--bg-secondary);
            padding: var(--space-4);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-4);
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: var(--font-size-sm);
        }

        .metric-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--space-4);
            margin: var(--space-4) 0;
        }

        .metric-card {
            background: var(--bg-secondary);
            padding: var(--space-4);
            border-radius: var(--radius-lg);
            text-align: center;
        }

        .metric-value {
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-bold);
            color: var(--text-primary);
            margin: 0;
        }

        .metric-label {
            font-size: var(--font-size-sm);
            color: var(--text-secondary);
            margin: var(--space-1) 0 0 0;
        }

        .chart-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-4);
        }

        .chart-example {
            background: var(--bg-secondary);
            padding: var(--space-4);
            border-radius: var(--radius-lg);
        }

        .chart-example-title {
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-medium);
            color: var(--text-primary);
            margin: 0 0 var(--space-3) 0;
        }

        .live-data-demo {
            background: linear-gradient(135deg, var(--color-primary-light) 0%, #e6f7ff 100%);
            border: 1px solid rgba(24, 144, 255, 0.2);
            padding: var(--space-6);
            border-radius: var(--radius-xl);
            text-align: center;
            margin-bottom: var(--space-6);
        }

        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            background: var(--color-success);
            color: var(--text-white);
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-xl);
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-medium);
            margin-bottom: var(--space-4);
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: var(--text-white);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .data-source-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-4);
        }

        .data-source-card {
            background: var(--bg-secondary);
            padding: var(--space-4);
            border-radius: var(--radius-lg);
            border-left: 4px solid var(--color-primary);
        }

        .source-header {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            margin-bottom: var(--space-3);
        }

        .source-logo {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-base);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-white);
            font-weight: var(--font-weight-bold);
        }

        .source-logo.quickbooks { background: linear-gradient(135deg, #0077c5 0%, #00a4e4 100%); }
        .source-logo.bamboohr { background: linear-gradient(135deg, #6cc04a 0%, #8bc34a 100%); }

        .source-info h4 {
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-medium);
            color: var(--text-primary);
            margin: 0;
        }

        .source-info p {
            font-size: var(--font-size-sm);
            color: var(--text-secondary);
            margin: 0;
        }

        .refresh-btn {
            background: var(--color-primary);
            color: var(--text-white);
            border: none;
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-base);
            font-size: var(--font-size-sm);
            cursor: pointer;
            margin-top: var(--space-4);
            transition: var(--transition-base);
        }

        .refresh-btn:hover {
            background: var(--color-primary-hover);
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <!-- Header -->
        <div class="demo-header">
            <h1 class="demo-title">ðŸ“Š Data Visualizations Demo</h1>
            <p class="demo-subtitle">
                Interactive demonstration of mock data and CSS-based charts for the SaaS Analytics Platform
            </p>
        </div>

        <!-- Live Data Indicator -->
        <div class="live-data-demo">
            <div class="live-indicator">
                <div class="live-dot"></div>
                Live Demo Data
            </div>
            <h3 style="margin: 0 0 var(--space-2) 0; color: var(--text-primary);">Real-time Analytics Simulation</h3>
            <p style="margin: 0; color: var(--text-secondary);">
                This demo shows how the platform would display live data from integrated business systems
            </p>
        </div>

        <!-- Main Demo Grid -->
        <div class="demo-grid">
            <!-- Financial Data Section -->
            <div class="demo-section">
                <h2 class="demo-section-title">
                    <i data-feather="dollar-sign" style="width: 20px; height: 20px;"></i>
                    Financial Analytics (QuickBooks)
                </h2>

                <div class="metric-cards">
                    <div class="metric-card">
                        <div class="metric-value" id="mrr-value">$0</div>
                        <div class="metric-label">Monthly Recurring Revenue</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="profit-margin">0%</div>
                        <div class="metric-label">Profit Margin</div>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Revenue Growth Trend</div>
                    <div class="line-chart revenue-line-chart chart-animate-in"></div>
                </div>

                <button class="refresh-btn" onclick="refreshFinancialData()">
                    <i data-feather="refresh-cw" style="width: 14px; height: 14px; margin-right: 6px;"></i>
                    Refresh Data
                </button>
            </div>

            <!-- HR Analytics Section -->
            <div class="demo-section">
                <h2 class="demo-section-title">
                    <i data-feather="users" style="width: 20px; height: 20px;"></i>
                    HR Analytics (Bamboo HR)
                </h2>

                <div class="metric-cards">
                    <div class="metric-card">
                        <div class="metric-value" id="employee-count">0</div>
                        <div class="metric-label">Total Employees</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="retention-rate">0%</div>
                        <div class="metric-label">Retention Rate</div>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Department Budget Distribution</div>
                    <div class="pie-chart department-pie-chart chart-animate-in"></div>
                </div>

                <button class="refresh-btn" onclick="refreshHRData()">
                    <i data-feather="refresh-cw" style="width: 14px; height: 14px; margin-right: 6px;"></i>
                    Refresh Data
                </button>
            </div>

            <!-- AI Insights Section -->
            <div class="demo-section">
                <h2 class="demo-section-title">
                    <i data-feather="zap" style="width: 20px; height: 20px;"></i>
                    AI-Powered Insights
                </h2>

                <div id="insights-container">
                    <!-- Insights will be populated by JavaScript -->
                </div>

                <button class="refresh-btn" onclick="refreshInsights()">
                    <i data-feather="zap" style="width: 14px; height: 14px; margin-right: 6px;"></i>
                    Generate New Insights
                </button>
            </div>

            <!-- Platform Metrics Section -->
            <div class="demo-section">
                <h2 class="demo-section-title">
                    <i data-feather="activity" style="width: 20px; height: 20px;"></i>
                    Platform Performance
                </h2>

                <div class="metric-cards">
                    <div class="metric-card">
                        <div class="metric-value" id="uptime">0%</div>
                        <div class="metric-label">Uptime</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="response-time">0ms</div>
                        <div class="metric-label">Avg Response</div>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">System Performance</div>
                    <div class="gauge-chart">
                        <div class="gauge-needle"></div>
                    </div>
                </div>

                <button class="refresh-btn" onclick="refreshPlatformData()">
                    <i data-feather="activity" style="width: 14px; height: 14px; margin-right: 6px;"></i>
                    Update Metrics
                </button>
            </div>
        </div>

        <!-- Chart Examples Section -->
        <div class="demo-section" style="grid-column: 1 / -1;">
            <h2 class="demo-section-title">
                <i data-feather="bar-chart-2" style="width: 20px; height: 20px;"></i>
                Chart Visualization Examples
            </h2>

            <div class="chart-examples">
                <div class="chart-example">
                    <div class="chart-example-title">Monthly Revenue (Bar Chart)</div>
                    <div class="bar-chart revenue-bar-chart">
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                    </div>
                </div>

                <div class="chart-example">
                    <div class="chart-example-title">Performance Progress</div>
                    <div style="padding: var(--space-4);">
                        <div class="progress-chart" style="margin-bottom: var(--space-3);">
                            <div class="progress-fill" style="width: 78%;"></div>
                        </div>
                        <div class="progress-chart" style="margin-bottom: var(--space-3);">
                            <div class="progress-fill" style="width: 92%;"></div>
                        </div>
                        <div class="progress-chart">
                            <div class="progress-fill" style="width: 65%;"></div>
                        </div>
                    </div>
                </div>

                <div class="chart-example">
                    <div class="chart-example-title">Customer Segments (Donut Chart)</div>
                    <div class="donut-chart customer-segment-pie">
                        <div class="donut-center-text">
                            <div class="donut-center-value">347</div>
                            <div class="donut-center-label">Total Customers</div>
                        </div>
                    </div>
                </div>

                <div class="chart-example">
                    <div class="chart-example-title">Trend Sparklines</div>
                    <div style="padding: var(--space-4); display: grid; gap: var(--space-3);">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-size: var(--font-size-sm);">Revenue</span>
                            <div class="sparkline-chart sparkline-up"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-size: var(--font-size-sm);">Expenses</span>
                            <div class="sparkline-chart sparkline-down"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-size: var(--font-size-sm);">Users</span>
                            <div class="sparkline-chart sparkline-up"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Data Sources Section -->
        <div class="demo-section" style="grid-column: 1 / -1;">
            <h2 class="demo-section-title">
                <i data-feather="database" style="width: 20px; height: 20px;"></i>
                Connected Data Sources
            </h2>

            <div class="data-source-cards">
                <div class="data-source-card">
                    <div class="source-header">
                        <div class="source-logo quickbooks">QB</div>
                        <div class="source-info">
                            <h4>QuickBooks Online</h4>
                            <p>Financial data integration</p>
                        </div>
                    </div>
                    <div class="data-display" id="quickbooks-data">
                        Loading financial data...
                    </div>
                </div>

                <div class="data-source-card">
                    <div class="source-header">
                        <div class="source-logo bamboohr">HR</div>
                        <div class="source-info">
                            <h4>Bamboo HR</h4>
                            <p>Employee & payroll data</p>
                        </div>
                    </div>
                    <div class="data-display" id="bamboohr-data">
                        Loading HR data...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="assets/js/prototype.js"></script>
    <script src="assets/js/mock-data.js"></script>
    <script>
        // Initialize Feather icons
        feather.replace();

        // Initialize demo with mock data
        document.addEventListener('DOMContentLoaded', function() {
            initializeDemo();
            startLiveUpdates();
        });

        function initializeDemo() {
            updateFinancialMetrics();
            updateHRMetrics();
            updatePlatformMetrics();
            updateInsights();
            updateDataSources();
        }

        function updateFinancialMetrics() {
            const data = window.MockData.financial;

            // Animate MRR counter
            animateCounter(document.getElementById('mrr-value'), data.revenue.monthly[11].amount, '$');

            // Update profit margin
            document.getElementById('profit-margin').textContent =
                window.MockData.financial.profitMargin.current + '%';
        }

        function updateHRMetrics() {
            const data = window.MockData.hr;

            // Animate employee count
            animateCounter(document.getElementById('employee-count'), data.employees.total);

            // Update retention rate
            document.getElementById('retention-rate').textContent = data.retention.rate + '%';
        }

        function updatePlatformMetrics() {
            const data = window.MockData.platform;

            // Update uptime
            document.getElementById('uptime').textContent = data.performance.uptime + '%';

            // Update response time
            document.getElementById('response-time').textContent = data.performance.responseTime + 'ms';
        }

        function updateInsights() {
            const container = document.getElementById('insights-container');
            const insights = window.MockData.insights.slice(0, 2); // Show first 2 insights

            container.innerHTML = insights.map(insight => `
                <div style="background: var(--bg-secondary); padding: var(--space-4); border-radius: var(--radius-lg); margin-bottom: var(--space-3); border-left: 4px solid var(--color-${insight.priority === 'high' ? 'error' : insight.priority === 'medium' ? 'warning' : 'success'});">
                    <h4 style="margin: 0 0 var(--space-2) 0; font-size: var(--font-size-sm); color: var(--text-primary);">${insight.title}</h4>
                    <p style="margin: 0 0 var(--space-2) 0; font-size: var(--font-size-xs); color: var(--text-secondary);">${insight.description}</p>
                    <div style="font-size: var(--font-size-xs); color: var(--color-${insight.priority === 'high' ? 'error' : insight.priority === 'medium' ? 'warning' : 'success'}); font-weight: var(--font-weight-medium);">
                        ${insight.impact} â€¢ ${insight.confidence}% confidence
                    </div>
                </div>
            `).join('');
        }

        function updateDataSources() {
            // Update QuickBooks data display
            const qbData = window.MockData.financial;
            document.getElementById('quickbooks-data').innerHTML = `
                Latest Revenue: ${window.MockData.utils.formatCurrency(qbData.revenue.monthly[11].amount)}<br>
                Growth: +${qbData.revenue.monthly[11].growth}%<br>
                Profit Margin: ${qbData.profitMargin.current}%<br>
                Last Sync: 2 hours ago
            `;

            // Update Bamboo HR data display
            const hrData = window.MockData.hr;
            document.getElementById('bamboohr-data').innerHTML = `
                Total Employees: ${hrData.employees.total}<br>
                New Hires: ${hrData.employees.newHires}<br>
                Retention Rate: ${hrData.retention.rate}%<br>
                Last Sync: 1 hour ago
            `;
        }

        function animateCounter(element, targetValue, prefix = '') {
            let current = 0;
            const increment = targetValue / 50;
            const timer = setInterval(() => {
                current += increment;
                if (current >= targetValue) {
                    current = targetValue;
                    clearInterval(timer);
                }
                element.textContent = prefix + Math.floor(current).toLocaleString();
            }, 30);
        }

        function refreshFinancialData() {
            showNotification('Refreshing financial data from QuickBooks...', 'info');
            setTimeout(() => {
                updateFinancialMetrics();
                showNotification('Financial data updated successfully!', 'success');
            }, 1500);
        }

        function refreshHRData() {
            showNotification('Refreshing HR data from Bamboo HR...', 'info');
            setTimeout(() => {
                updateHRMetrics();
                showNotification('HR data updated successfully!', 'success');
            }, 1500);
        }

        function refreshInsights() {
            showNotification('Generating new AI insights...', 'info');
            setTimeout(() => {
                updateInsights();
                showNotification('New insights generated!', 'success');
            }, 2000);
        }

        function refreshPlatformData() {
            showNotification('Updating platform metrics...', 'info');
            setTimeout(() => {
                updatePlatformMetrics();
                showNotification('Platform metrics updated!', 'success');
            }, 1000);
        }

        function startLiveUpdates() {
            // Simulate live data updates every 10 seconds
            setInterval(() => {
                // Randomly update one of the metrics
                const updates = [updateFinancialMetrics, updateHRMetrics, updatePlatformMetrics];
                const randomUpdate = updates[Math.floor(Math.random() * updates.length)];
                randomUpdate();
            }, 10000);
        }

        function showNotification(message, type) {
            if (window.PrototypeApp && window.PrototypeApp.showNotification) {
                window.PrototypeApp.showNotification(message, type);
            } else {
                // Fallback notification
                console.log(`${type.toUpperCase()}: ${message}`);
            }
        }

        // Add chart interaction animations
        document.addEventListener('DOMContentLoaded', function() {
            const charts = document.querySelectorAll('.chart-container, .chart-example');
            charts.forEach((chart, index) => {
                setTimeout(() => {
                    chart.classList.add('chart-animate-in');
                }, index * 200);
            });
        });
    </script>
</body>
</html>