<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Microsoft Fabric Provisioning - DataFlow Analytics Platform">
    <title>Microsoft Fabric Provisioning - DataFlow Analytics</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../assets/images/logos/favicon.ico">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/admin.css">

    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>

    <style>
        /* Fabric Provisioning Specific Styles */
        .fabric-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--space-6);
            margin-bottom: var(--space-8);
        }

        .fabric-metric {
            background: var(--bg-primary);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            box-shadow: var(--shadow-sm);
            transition: var(--transition-base);
            position: relative;
            overflow: hidden;
        }

        .fabric-metric:hover {
            box-shadow: var(--shadow-md);
        }

        .fabric-metric.capacity {
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--color-info-light) 100%);
            border-color: var(--color-info);
        }

        .fabric-metric.workspaces {
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--color-success-light) 100%);
            border-color: var(--color-success);
        }

        .fabric-metric.compute {
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--color-warning-light) 100%);
            border-color: var(--color-warning);
        }

        .fabric-metric.storage {
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--color-purple-light) 100%);
            border-color: var(--color-purple);
        }

        .metric-header {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            margin-bottom: var(--space-4);
        }

        .metric-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-white);
            font-size: var(--font-size-lg);
        }

        .metric-icon.capacity {
            background: linear-gradient(135deg, var(--color-info) 0%, #40a9ff 100%);
        }

        .metric-icon.workspaces {
            background: linear-gradient(135deg, var(--color-success) 0%, #73d13d 100%);
        }

        .metric-icon.compute {
            background: linear-gradient(135deg, var(--color-warning) 0%, #ffc53d 100%);
        }

        .metric-icon.storage {
            background: linear-gradient(135deg, #722ed1 0%, #9254de 100%);
        }

        .metric-info {
            flex: 1;
        }

        .metric-title {
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-semibold);
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin: 0 0 var(--space-1) 0;
        }

        .metric-value {
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-bold);
            color: var(--text-primary);
            margin: 0;
        }

        .metric-details {
            margin-top: var(--space-4);
            padding-top: var(--space-4);
            border-top: 1px solid var(--border-secondary);
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-2);
            font-size: var(--font-size-sm);
        }

        .detail-item:last-child {
            margin-bottom: 0;
        }

        .detail-label {
            color: var(--text-secondary);
        }

        .detail-value {
            color: var(--text-primary);
            font-weight: var(--font-weight-medium);
        }

        .capacity-bar {
            width: 100%;
            height: 6px;
            background: var(--bg-secondary);
            border-radius: var(--radius-base);
            overflow: hidden;
            margin: var(--space-2) 0;
        }

        .capacity-fill {
            height: 100%;
            border-radius: var(--radius-base);
            transition: width 0.3s ease;
        }

        .capacity-fill.low {
            background: linear-gradient(90deg, var(--color-success) 0%, #73d13d 100%);
        }

        .capacity-fill.medium {
            background: linear-gradient(90deg, var(--color-warning) 0%, #ffc53d 100%);
        }

        .capacity-fill.high {
            background: linear-gradient(90deg, var(--color-error) 0%, #ff7875 100%);
        }

        .fabric-main-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: var(--space-6);
            margin-bottom: var(--space-8);
        }

        .fabric-section {
            background: var(--bg-primary);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            box-shadow: var(--shadow-sm);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-5);
            padding-bottom: var(--space-4);
            border-bottom: 1px solid var(--border-secondary);
        }

        .section-title {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            margin: 0;
        }

        .workspace-grid {
            display: grid;
            gap: var(--space-4);
        }

        .workspace-card {
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-lg);
            padding: var(--space-5);
            transition: var(--transition-base);
            cursor: pointer;
        }

        .workspace-card:hover {
            border-color: var(--color-primary);
            background: var(--bg-hover);
        }

        .workspace-card.active {
            border-color: var(--color-success);
            background: var(--color-success-light);
        }

        .workspace-card.provisioning {
            border-color: var(--color-warning);
            background: var(--color-warning-light);
        }

        .workspace-card.error {
            border-color: var(--color-error);
            background: var(--color-error-light);
        }

        .workspace-header {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            margin-bottom: var(--space-3);
        }

        .workspace-status {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .workspace-status.active {
            background: var(--color-success);
            box-shadow: 0 0 8px rgba(82, 196, 26, 0.5);
        }

        .workspace-status.provisioning {
            background: var(--color-warning);
            animation: pulse 2s ease-in-out infinite;
        }

        .workspace-status.error {
            background: var(--color-error);
        }

        .workspace-name {
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            margin: 0;
            flex: 1;
        }

        .workspace-type {
            font-size: var(--font-size-xs);
            color: var(--text-secondary);
            background: var(--bg-secondary);
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-base);
        }

        .workspace-details {
            font-size: var(--font-size-sm);
            color: var(--text-secondary);
            margin: 0 0 var(--space-3) 0;
            line-height: 1.4;
        }

        .workspace-resources {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-3);
            margin-top: var(--space-3);
            padding-top: var(--space-3);
            border-top: 1px solid var(--border-secondary);
        }

        .resource-item {
            text-align: center;
        }

        .resource-value {
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-bold);
            color: var(--text-primary);
            margin: 0;
        }

        .resource-label {
            font-size: var(--font-size-xs);
            color: var(--text-secondary);
            margin: 0;
        }

        .workspace-actions {
            display: flex;
            gap: var(--space-2);
            margin-top: var(--space-4);
        }

        .action-btn {
            flex: 1;
            padding: var(--space-2) var(--space-3);
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-medium);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition-base);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-1);
        }

        .action-btn.primary {
            background: var(--color-primary);
            color: var(--text-white);
            border-color: var(--color-primary);
        }

        .action-btn.primary:hover {
            background: var(--color-primary-hover);
        }

        .action-btn.secondary {
            background: var(--bg-primary);
            color: var(--text-primary);
        }

        .action-btn.secondary:hover {
            border-color: var(--color-primary);
            color: var(--color-primary);
        }

        .provisioning-panel {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: var(--space-5);
            margin-top: var(--space-6);
        }

        .provisioning-form {
            display: grid;
            gap: var(--space-4);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-4);
        }

        .capacity-calculator {
            background: var(--bg-primary);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-lg);
            padding: var(--space-5);
            margin: var(--space-4) 0;
        }

        .calculator-header {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            margin-bottom: var(--space-4);
        }

        .calculator-title {
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            margin: 0;
        }

        .capacity-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--space-4);
            margin-bottom: var(--space-4);
        }

        .capacity-result {
            background: var(--color-info-light);
            border: 1px solid var(--color-info);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            text-align: center;
        }

        .result-value {
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-info);
            margin: 0 0 var(--space-1) 0;
        }

        .result-label {
            font-size: var(--font-size-sm);
            color: var(--text-primary);
            margin: 0;
        }

        .activity-feed {
            max-height: 400px;
            overflow-y: auto;
        }

        .activity-item {
            display: flex;
            align-items: start;
            gap: var(--space-3);
            margin-bottom: var(--space-4);
            padding-bottom: var(--space-4);
            border-bottom: 1px solid var(--border-secondary);
        }

        .activity-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .activity-icon {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-white);
            flex-shrink: 0;
        }

        .activity-icon.success {
            background: var(--color-success);
        }

        .activity-icon.info {
            background: var(--color-info);
        }

        .activity-icon.warning {
            background: var(--color-warning);
        }

        .activity-icon.error {
            background: var(--color-error);
        }

        .activity-content {
            flex: 1;
        }

        .activity-title {
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-medium);
            color: var(--text-primary);
            margin: 0 0 var(--space-1) 0;
        }

        .activity-description {
            font-size: var(--font-size-xs);
            color: var(--text-secondary);
            margin: 0 0 var(--space-1) 0;
            line-height: 1.4;
        }

        .activity-time {
            font-size: var(--font-size-xs);
            color: var(--text-tertiary);
            margin: 0;
        }

        .progress-section {
            margin: var(--space-4) 0;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-2);
        }

        .progress-label {
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-medium);
            color: var(--text-primary);
            margin: 0;
        }

        .progress-percentage {
            font-size: var(--font-size-sm);
            color: var(--color-info);
            font-weight: var(--font-weight-bold);
            margin: 0;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--bg-secondary);
            border-radius: var(--radius-base);
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-info) 0%, #40a9ff 100%);
            border-radius: var(--radius-base);
            transition: width 0.5s ease;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .fabric-main-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .fabric-overview {
                grid-template-columns: 1fr;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .capacity-inputs {
                grid-template-columns: 1fr;
            }

            .workspace-resources {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="admin-layout">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <nav class="admin-nav">
                <div class="admin-nav-logo">
                    <h1>DataFlow</h1>
                    <div class="subtitle">Admin Portal</div>
                </div>

                <a href="dashboard.html" class="admin-nav-item">
                    <i data-feather="home" class="icon"></i>
                    <span class="text">Dashboard</span>
                </a>

                <a href="tenants.html" class="admin-nav-item">
                    <i data-feather="users" class="icon"></i>
                    <span class="text">Tenants</span>
                </a>

                <a href="billing.html" class="admin-nav-item">
                    <i data-feather="credit-card" class="icon"></i>
                    <span class="text">Billing</span>
                </a>

                <a href="fabric-provisioning.html" class="admin-nav-item active">
                    <i data-feather="database" class="icon"></i>
                    <span class="text">Fabric</span>
                </a>

                <a href="notifications.html" class="admin-nav-item">
                    <i data-feather="bell" class="icon"></i>
                    <span class="text">Notifications</span>
                </a>

                <a href="#" class="admin-nav-item">
                    <i data-feather="settings" class="icon"></i>
                    <span class="text">Settings</span>
                </a>

                <a href="#" class="admin-nav-item">
                    <i data-feather="help-circle" class="icon"></i>
                    <span class="text">Support</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Header -->
            <header class="admin-header">
                <div class="admin-header-left">
                    <button class="admin-sidebar-toggle">
                        <i data-feather="menu"></i>
                    </button>

                    <div class="admin-breadcrumb">
                        <span class="admin-breadcrumb-item">Admin</span>
                        <span class="admin-breadcrumb-separator">/</span>
                        <span class="admin-breadcrumb-item current">Microsoft Fabric Provisioning</span>
                    </div>
                </div>

                <div class="admin-header-right">
                    <button class="admin-notification-bell">
                        <i data-feather="bell"></i>
                        <span class="admin-notification-badge">2</span>
                    </button>

                    <div class="admin-user-menu">
                        <div class="admin-user-avatar">AS</div>
                        <div class="admin-user-info">
                            <div class="admin-user-name">Admin User</div>
                            <div class="admin-user-role">System Admin</div>
                        </div>
                        <i data-feather="chevron-down"></i>
                    </div>
                </div>
            </header>

            <!-- Content -->
            <div class="admin-content">
                <!-- Fabric Overview -->
                <div class="fabric-overview">
                    <div class="fabric-metric capacity">
                        <div class="metric-header">
                            <div class="metric-icon capacity">
                                <i data-feather="zap"></i>
                            </div>
                            <div class="metric-info">
                                <div class="metric-title">Total Capacity</div>
                                <div class="metric-value" data-counter="2048">0 CU</div>
                            </div>
                        </div>
                        <div class="capacity-bar">
                            <div class="capacity-fill medium" style="width: 68%"></div>
                        </div>
                        <div class="metric-details">
                            <div class="detail-item">
                                <span class="detail-label">Used</span>
                                <span class="detail-value">1,392 CU (68%)</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Available</span>
                                <span class="detail-value">656 CU (32%)</span>
                            </div>
                        </div>
                    </div>

                    <div class="fabric-metric workspaces">
                        <div class="metric-header">
                            <div class="metric-icon workspaces">
                                <i data-feather="grid"></i>
                            </div>
                            <div class="metric-info">
                                <div class="metric-title">Workspaces</div>
                                <div class="metric-value" data-counter="12">0</div>
                            </div>
                        </div>
                        <div class="metric-details">
                            <div class="detail-item">
                                <span class="detail-label">Active</span>
                                <span class="detail-value">8 workspaces</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Provisioning</span>
                                <span class="detail-value">2 workspaces</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Available Slots</span>
                                <span class="detail-value">38 remaining</span>
                            </div>
                        </div>
                    </div>

                    <div class="fabric-metric compute">
                        <div class="metric-header">
                            <div class="metric-icon compute">
                                <i data-feather="cpu"></i>
                            </div>
                            <div class="metric-info">
                                <div class="metric-title">Compute Usage</div>
                                <div class="metric-value">76%</div>
                            </div>
                        </div>
                        <div class="capacity-bar">
                            <div class="capacity-fill medium" style="width: 76%"></div>
                        </div>
                        <div class="metric-details">
                            <div class="detail-item">
                                <span class="detail-label">Peak Today</span>
                                <span class="detail-value">94% at 14:30</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Average 7d</span>
                                <span class="detail-value">68%</span>
                            </div>
                        </div>
                    </div>

                    <div class="fabric-metric storage">
                        <div class="metric-header">
                            <div class="metric-icon storage">
                                <i data-feather="hard-drive"></i>
                            </div>
                            <div class="metric-info">
                                <div class="metric-title">OneLake Storage</div>
                                <div class="metric-value">12.7 TB</div>
                            </div>
                        </div>
                        <div class="capacity-bar">
                            <div class="capacity-fill low" style="width: 42%"></div>
                        </div>
                        <div class="metric-details">
                            <div class="detail-item">
                                <span class="detail-label">Used</span>
                                <span class="detail-value">12.7 TB (42%)</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Available</span>
                                <span class="detail-value">17.3 TB (58%)</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main Fabric Grid -->
                <div class="fabric-main-grid">
                    <!-- Workspace Management -->
                    <div class="fabric-section">
                        <div class="section-header">
                            <h3 class="section-title">Workspace Management</h3>
                            <div class="admin-section-actions">
                                <button class="dashboard-action-btn" onclick="openProvisioningModal()">
                                    <i data-feather="plus" style="width: 14px; height: 14px; margin-right: 6px;"></i>
                                    New Workspace
                                </button>
                                <button class="dashboard-action-btn">Bulk Actions</button>
                            </div>
                        </div>

                        <div class="workspace-grid">
                            <div class="workspace-card active" onclick="selectWorkspace(this)">
                                <div class="workspace-header">
                                    <div class="workspace-status active"></div>
                                    <h4 class="workspace-name">Production Analytics</h4>
                                    <div class="workspace-type">Premium</div>
                                </div>
                                <p class="workspace-details">
                                    Main production environment for customer analytics and reporting workloads.
                                </p>
                                <div class="workspace-resources">
                                    <div class="resource-item">
                                        <div class="resource-value">512 CU</div>
                                        <div class="resource-label">Capacity</div>
                                    </div>
                                    <div class="resource-item">
                                        <div class="resource-value">2.4 TB</div>
                                        <div class="resource-label">Storage</div>
                                    </div>
                                    <div class="resource-item">
                                        <div class="resource-value">5 Users</div>
                                        <div class="resource-label">Access</div>
                                    </div>
                                </div>
                                <div class="workspace-actions">
                                    <button class="action-btn secondary">
                                        <i data-feather="settings" style="width: 12px; height: 12px;"></i>
                                        Configure
                                    </button>
                                    <button class="action-btn secondary">
                                        <i data-feather="bar-chart" style="width: 12px; height: 12px;"></i>
                                        Monitor
                                    </button>
                                </div>
                            </div>

                            <div class="workspace-card provisioning" onclick="selectWorkspace(this)">
                                <div class="workspace-header">
                                    <div class="workspace-status provisioning"></div>
                                    <h4 class="workspace-name">Development Environment</h4>
                                    <div class="workspace-type">Standard</div>
                                </div>
                                <p class="workspace-details">
                                    Development and testing workspace for new analytics features and data pipelines.
                                </p>
                                <div class="progress-section">
                                    <div class="progress-header">
                                        <span class="progress-label">Provisioning Progress</span>
                                        <span class="progress-percentage">73%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 73%"></div>
                                    </div>
                                </div>
                                <div class="workspace-resources">
                                    <div class="resource-item">
                                        <div class="resource-value">256 CU</div>
                                        <div class="resource-label">Capacity</div>
                                    </div>
                                    <div class="resource-item">
                                        <div class="resource-value">1.2 TB</div>
                                        <div class="resource-label">Storage</div>
                                    </div>
                                    <div class="resource-item">
                                        <div class="resource-value">3 Users</div>
                                        <div class="resource-label">Access</div>
                                    </div>
                                </div>
                            </div>

                            <div class="workspace-card active" onclick="selectWorkspace(this)">
                                <div class="workspace-header">
                                    <div class="workspace-status active"></div>
                                    <h4 class="workspace-name">Customer Portal Backend</h4>
                                    <div class="workspace-type">Premium</div>
                                </div>
                                <p class="workspace-details">
                                    Dedicated workspace for customer-facing analytics and reporting services.
                                </p>
                                <div class="workspace-resources">
                                    <div class="resource-item">
                                        <div class="resource-value">768 CU</div>
                                        <div class="resource-label">Capacity</div>
                                    </div>
                                    <div class="resource-item">
                                        <div class="resource-value">5.8 TB</div>
                                        <div class="resource-label">Storage</div>
                                    </div>
                                    <div class="resource-item">
                                        <div class="resource-value">12 Users</div>
                                        <div class="resource-label">Access</div>
                                    </div>
                                </div>
                                <div class="workspace-actions">
                                    <button class="action-btn secondary">
                                        <i data-feather="settings" style="width: 12px; height: 12px;"></i>
                                        Configure
                                    </button>
                                    <button class="action-btn secondary">
                                        <i data-feather="bar-chart" style="width: 12px; height: 12px;"></i>
                                        Monitor
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Provisioning Panel -->
                        <div class="provisioning-panel" id="provisioning-panel" style="display: none;">
                            <h4 style="margin: 0 0 var(--space-4) 0; color: var(--text-primary);">Provision New Workspace</h4>

                            <form class="provisioning-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Workspace Name</label>
                                        <input type="text" class="form-input" placeholder="Enter workspace name" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Environment Type</label>
                                        <select class="form-input">
                                            <option value="production">Production</option>
                                            <option value="staging">Staging</option>
                                            <option value="development">Development</option>
                                            <option value="testing">Testing</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Capacity Units</label>
                                        <select class="form-input" id="capacity-select" onchange="calculateCost()">
                                            <option value="128">F2 - 128 CU</option>
                                            <option value="256">F4 - 256 CU</option>
                                            <option value="512">F8 - 512 CU</option>
                                            <option value="1024">F16 - 1,024 CU</option>
                                            <option value="2048">F32 - 2,048 CU</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Region</label>
                                        <select class="form-input">
                                            <option value="east-us">East US</option>
                                            <option value="west-us">West US</option>
                                            <option value="europe">Europe</option>
                                            <option value="asia">Asia Pacific</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="capacity-calculator">
                                    <div class="calculator-header">
                                        <i data-feather="calculator" style="width: 16px; height: 16px; color: var(--color-info);"></i>
                                        <span class="calculator-title">Cost Calculator</span>
                                    </div>
                                    <div class="capacity-inputs">
                                        <div class="form-group">
                                            <label class="form-label">Hours per Day</label>
                                            <input type="number" class="form-input" value="8" min="1" max="24" onchange="calculateCost()">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Days per Month</label>
                                            <input type="number" class="form-input" value="22" min="1" max="31" onchange="calculateCost()">
                                        </div>
                                    </div>
                                    <div class="capacity-result">
                                        <div class="result-value" id="cost-result">$1,024</div>
                                        <div class="result-label">Estimated Monthly Cost</div>
                                    </div>
                                </div>

                                <div style="display: flex; gap: var(--space-3); justify-content: flex-end;">
                                    <button type="button" class="btn btn-secondary" onclick="hideProvisioningPanel()">Cancel</button>
                                    <button type="submit" class="btn btn-primary" onclick="provisionWorkspace(event)">
                                        <i data-feather="plus" style="width: 16px; height: 16px; margin-right: 8px;"></i>
                                        Provision Workspace
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Activity & Monitoring -->
                    <div class="fabric-section">
                        <div class="section-header">
                            <h3 class="section-title">Recent Activity</h3>
                            <button class="dashboard-action-btn">View All</button>
                        </div>

                        <div class="activity-feed">
                            <div class="activity-item">
                                <div class="activity-icon success">
                                    <i data-feather="check-circle" style="width: 16px; height: 16px;"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">Workspace Provisioned</div>
                                    <div class="activity-description">
                                        Customer Portal Backend workspace successfully deployed with 768 CU capacity
                                    </div>
                                    <div class="activity-time">2 hours ago</div>
                                </div>
                            </div>

                            <div class="activity-item">
                                <div class="activity-icon info">
                                    <i data-feather="settings" style="width: 16px; height: 16px;"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">Capacity Adjusted</div>
                                    <div class="activity-description">
                                        Production Analytics workspace scaled from 256 CU to 512 CU due to increased usage
                                    </div>
                                    <div class="activity-time">4 hours ago</div>
                                </div>
                            </div>

                            <div class="activity-item">
                                <div class="activity-icon warning">
                                    <i data-feather="alert-triangle" style="width: 16px; height: 16px;"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">High Usage Alert</div>
                                    <div class="activity-description">
                                        Development Environment reached 85% capacity utilization during peak hours
                                    </div>
                                    <div class="activity-time">6 hours ago</div>
                                </div>
                            </div>

                            <div class="activity-item">
                                <div class="activity-icon info">
                                    <i data-feather="database" style="width: 16px; height: 16px;"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">OneLake Storage Optimization</div>
                                    <div class="activity-description">
                                        Automatic data lifecycle management freed up 2.1 TB of storage across all workspaces
                                    </div>
                                    <div class="activity-time">8 hours ago</div>
                                </div>
                            </div>

                            <div class="activity-item">
                                <div class="activity-icon success">
                                    <i data-feather="users" style="width: 16px; height: 16px;"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">User Access Granted</div>
                                    <div class="activity-description">
                                        Added 3 new users to Production Analytics workspace with Contributor permissions
                                    </div>
                                    <div class="activity-time">12 hours ago</div>
                                </div>
                            </div>

                            <div class="activity-item">
                                <div class="activity-icon info">
                                    <i data-feather="refresh-cw" style="width: 16px; height: 16px;"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">Backup Completed</div>
                                    <div class="activity-description">
                                        Scheduled backup of all workspace configurations and data completed successfully
                                    </div>
                                    <div class="activity-time">1 day ago</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="../assets/js/prototype.js"></script>
    <script>
        // Initialize Feather icons
        feather.replace();

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            animateCounters();
            setupWorkspaceManagement();
            simulateProvisioning();
        });

        function animateCounters() {
            setTimeout(() => {
                const counters = document.querySelectorAll('[data-counter]');
                counters.forEach(counter => {
                    const target = parseInt(counter.getAttribute('data-counter'));
                    window.PrototypeApp.animateCounter(counter, target);
                });
            }, 500);
        }

        function setupWorkspaceManagement() {
            // Workspace selection
            window.selectWorkspace = function(card) {
                document.querySelectorAll('.workspace-card').forEach(c => {
                    c.classList.remove('selected');
                });
                card.classList.add('selected');

                const workspaceName = card.querySelector('.workspace-name').textContent;
                window.PrototypeApp.showNotification(`Selected workspace: ${workspaceName}`, 'info');
            };

            // Action buttons
            document.querySelectorAll('.action-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const action = this.textContent.trim();
                    const workspace = this.closest('.workspace-card').querySelector('.workspace-name').textContent;
                    window.PrototypeApp.showNotification(`${action} for ${workspace}`, 'info');
                });
            });
        }

        function openProvisioningModal() {
            const panel = document.getElementById('provisioning-panel');
            panel.style.display = 'block';
            calculateCost();
        }

        function hideProvisioningPanel() {
            const panel = document.getElementById('provisioning-panel');
            panel.style.display = 'none';
        }

        function calculateCost() {
            const capacitySelect = document.getElementById('capacity-select');
            const hoursInput = document.querySelector('input[type="number"]:nth-of-type(1)');
            const daysInput = document.querySelector('input[type="number"]:nth-of-type(2)');
            const costResult = document.getElementById('cost-result');

            if (capacitySelect && hoursInput && daysInput && costResult) {
                const capacity = parseInt(capacitySelect.value);
                const hours = parseInt(hoursInput.value);
                const days = parseInt(daysInput.value);

                // Simplified cost calculation (example rates)
                const costPerCUPerHour = 0.18;
                const totalCost = capacity * hours * days * costPerCUPerHour;

                costResult.textContent = `$${Math.round(totalCost).toLocaleString()}`;
            }
        }

        function provisionWorkspace(e) {
            e.preventDefault();

            const workspaceName = document.querySelector('input[type="text"]').value;
            if (!workspaceName) {
                window.PrototypeApp.showNotification('Please enter a workspace name', 'error');
                return;
            }

            // Simulate provisioning
            window.PrototypeApp.showNotification(`Starting provisioning for workspace: ${workspaceName}`, 'info');
            hideProvisioningPanel();

            // Reset form
            document.querySelector('.provisioning-form').reset();
            calculateCost();
        }

        function simulateProvisioning() {
            const progressFills = document.querySelectorAll('.progress-fill');
            const progressPercentages = document.querySelectorAll('.progress-percentage');

            progressFills.forEach((fill, index) => {
                let progress = 73;
                const interval = setInterval(() => {
                    progress += Math.random() * 3;
                    if (progress >= 100) {
                        progress = 100;
                        clearInterval(interval);

                        // Update to completed state
                        setTimeout(() => {
                            const provisioningCard = document.querySelector('.workspace-card.provisioning');
                            if (provisioningCard) {
                                provisioningCard.classList.remove('provisioning');
                                provisioningCard.classList.add('active');

                                const statusIndicator = provisioningCard.querySelector('.workspace-status');
                                statusIndicator.classList.remove('provisioning');
                                statusIndicator.classList.add('active');

                                // Remove progress section and add action buttons
                                const progressSection = provisioningCard.querySelector('.progress-section');
                                if (progressSection) {
                                    progressSection.remove();

                                    const actionsHtml = `
                                        <div class="workspace-actions">
                                            <button class="action-btn secondary">
                                                <i data-feather="settings" style="width: 12px; height: 12px;"></i>
                                                Configure
                                            </button>
                                            <button class="action-btn secondary">
                                                <i data-feather="bar-chart" style="width: 12px; height: 12px;"></i>
                                                Monitor
                                            </button>
                                        </div>
                                    `;
                                    provisioningCard.insertAdjacentHTML('beforeend', actionsHtml);
                                    feather.replace();
                                }

                                window.PrototypeApp.showNotification('Development Environment provisioning completed successfully!', 'success');
                            }
                        }, 2000);
                    }

                    fill.style.width = `${Math.min(progress, 100)}%`;
                    if (progressPercentages[index]) {
                        progressPercentages[index].textContent = `${Math.min(Math.floor(progress), 100)}%`;
                    }
                }, 4000);
            });
        }

        // Header actions
        document.querySelectorAll('.dashboard-action-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                if (this.textContent.includes('New Workspace')) {
                    return; // Handled by openProvisioningModal
                }

                const action = this.textContent.trim();
                window.PrototypeApp.showNotification(`${action} functionality`, 'info');
            });
        });
    </script>
</body>
</html>